# Langfuse ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Langfuse ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®åŸºæœ¬æ¦‚å¿µã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãŠã‚ˆã³æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å®Ÿè£…ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“– ç›®æ¬¡

- [Langfuse ã¨ã¯](#langfuse-ã¨ã¯)
- [ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®ä»•çµ„ã¿](#ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®ä»•çµ„ã¿)
- [ä¸»è¦ãªæ¦‚å¿µ](#ä¸»è¦ãªæ¦‚å¿µ)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [é€ä¿¡ã•ã‚Œã‚‹æƒ…å ±](#é€ä¿¡ã•ã‚Œã‚‹æƒ…å ±)
- [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)

## Langfuse ã¨ã¯

Langfuse ã¯ã€LLM ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›£è¦–ã€è©•ä¾¡ã€ãƒ‡ãƒãƒƒã‚°ã‚’è¡Œã†ãŸã‚ã®å¯è¦³æ¸¬æ€§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- **ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°** - ã™ã¹ã¦ã® LLM å‘¼ã³å‡ºã—ã‚’è‡ªå‹•è¨˜éŒ²
- **ã‚³ã‚¹ãƒˆè¿½è·¡** - ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‹ã‚‰ã‚³ã‚¹ãƒˆã‚’è‡ªå‹•è¨ˆç®—
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ** - ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã€ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡ã®æ¸¬å®š
- **è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ** - ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãƒ™ãƒ¼ã‚¹ã®å“è³ªè©•ä¾¡
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†æ** - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ãªãœ Langfuse ã‚’ä½¿ã†ã®ã‹

1. **å¯è¦–åŒ–** - ã™ã¹ã¦ã® LLM ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸€å…ƒçš„ã«å¯è¦–åŒ–
2. **ãƒ‡ãƒãƒƒã‚°** - å•é¡Œã®ã‚ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç´ æ—©ãç‰¹å®š
3. **ã‚³ã‚¹ãƒˆç®¡ç†** - ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã¨ã‚³ã‚¹ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡
4. **å“è³ªå‘ä¸Š** - è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ç¶™ç¶šçš„ãªå“è³ªæ”¹å–„
5. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç†è§£** - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã®åˆ†æã¨ã‚¤ãƒ³ã‚µã‚¤ãƒˆç²å¾—

## ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã®ä»•çµ„ã¿

### ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant App as Your Application
    participant SDK as Claude Agent SDK
    participant LF as Langfuse Client
    participant Cloud as Langfuse Cloud
    participant Bedrock as AWS Bedrock

    App->>SDK: agent.chat(prompt)
    SDK->>LF: start_generation()
    LF->>Cloud: Send trace metadata
    SDK->>Bedrock: API Call
    Bedrock-->>SDK: Streaming response
    SDK-->>App: Stream chunks
    App->>LF: update(output, usage)
    LF->>Cloud: Send completion data
    App->>LF: end() & flush()
    LF->>Cloud: Finalize trace
```

### è‡ªå‹•ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚° vs æ‰‹å‹•ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°

#### è‡ªå‹•ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ï¼ˆãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ï¼‰
```python
from langfuse import observe

@observe(as_type="generation")
async def chat(prompt: str) -> str:
    # Langfuse ãŒè‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹
    response = await query(prompt)
    return response
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«
- è‡ªå‹•çš„ã«ãƒˆãƒ¬ãƒ¼ã‚¹é–‹å§‹ãƒ»çµ‚äº†

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒé™å®šçš„
- ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ç´°ã‹ã„åˆ¶å¾¡ãŒé›£ã—ã„

#### æ‰‹å‹•ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°
```python
generation = langfuse.start_generation(
    name="chat",
    model="claude-3-5-sonnet",
    input=prompt,
)

try:
    response = await query(prompt)
    generation.update(output=response)
except Exception as e:
    generation.update(level="ERROR", status_message=str(e))
    raise
finally:
    generation.end()
    langfuse.flush()
```

**ãƒ¡ãƒªãƒƒãƒˆ:**
- å®Œå…¨ãªåˆ¶å¾¡
- ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ 
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æŸ”è»Ÿæ€§

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:**
- ã‚³ãƒ¼ãƒ‰ãŒå†—é•·
- æ‰‹å‹•ã§ end() ã¨ flush() ã‚’å‘¼ã¶å¿…è¦ãŒã‚ã‚‹

**æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é¸æŠ: æ‰‹å‹•ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°**

ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œã¨è©³ç´°ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ã®ãŸã‚ã€æ‰‹å‹•ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

## ä¸»è¦ãªæ¦‚å¿µ

### Traceï¼ˆãƒˆãƒ¬ãƒ¼ã‚¹ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰æœ€çµ‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¾ã§ã®å®Œå…¨ãªå®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã€‚

```
Trace: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•å¿œç­”
â”œâ”€â”€ Generation: LLM å‘¼ã³å‡ºã— 1
â”œâ”€â”€ Span: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
â””â”€â”€ Generation: LLM å‘¼ã³å‡ºã— 2
```

### Generationï¼ˆç”Ÿæˆï¼‰
LLM ã¸ã®å˜ä¸€ã®å‘¼ã³å‡ºã—ã€‚æœ€ã‚‚é‡è¦ãªãƒˆãƒ¬ãƒ¼ã‚¹å˜ä½ã€‚

**å«ã¾ã‚Œã‚‹æƒ…å ±:**
- å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆ
- ãƒ¢ãƒ‡ãƒ«å
- ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆtemperature, max_tokens ãªã©ï¼‰
- ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“

### Spanï¼ˆã‚¹ãƒ‘ãƒ³ï¼‰
LLM ä»¥å¤–ã®å‡¦ç†ï¼ˆãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªãªã©ï¼‰ã€‚

### Metadataï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼‰
ã‚«ã‚¹ã‚¿ãƒ æƒ…å ±ã‚’è¨˜éŒ²ã™ã‚‹ãŸã‚ã® key-value ã‚¹ãƒˆã‚¢ã€‚

**åˆ¶ç´„:**
- ã‚­ãƒ¼: è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿
- å€¤: æ–‡å­—åˆ—ï¼ˆ200æ–‡å­—ä»¥ä¸‹ï¼‰

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Your Application (src/agent.py)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ BedrockAgentSDK                   â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€ chat_streaming()              â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€ chat()                        â”‚  â”‚
â”‚  â”‚ â””â”€â”€ Langfuse Integration          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS Bedrock â”‚  â”‚ Langfuse Cloud   â”‚
â”‚ (Claude 3+) â”‚  â”‚ (Tracing Server) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

1. **ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–‹å§‹**
   - `start_generation()` ã§ãƒˆãƒ¬ãƒ¼ã‚¹é–‹å§‹
   - å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ãƒ¢ãƒ‡ãƒ«æƒ…å ±ã‚’é€ä¿¡

2. **LLM å®Ÿè¡Œ**
   - Bedrock ã« API ã‚³ãƒ¼ãƒ«
   - ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ä¿¡

3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**
   - ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‚’æ¨å®š
   - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°

4. **å®Œäº†**
   - `update()` ã§æœ€çµ‚ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
   - `end()` ã§ãƒˆãƒ¬ãƒ¼ã‚¹çµ‚äº†
   - `flush()` ã§ãƒãƒƒãƒ•ã‚¡ã‚’ã‚¯ãƒªã‚¢

## é€ä¿¡ã•ã‚Œã‚‹æƒ…å ±

### å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | èª¬æ˜ | ä¾‹ |
|-----------|-----|------|-----|
| `name` | string | Generation ã®åå‰ | "chat_streaming" |
| `model` | string | ãƒ¢ãƒ‡ãƒ«è­˜åˆ¥å­ | "anthropic.claude-3-5-sonnet-20241022-v2:0" |
| `input` | any | å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | "ã“ã‚“ã«ã¡ã¯" |
| `output` | any | ç”Ÿæˆã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ | "ã“ã‚“ã«ã¡ã¯ï¼..." |

### æ¨å¥¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | èª¬æ˜ | ä¾‹ |
|-----------|-----|------|-----|
| `model_parameters` | dict | ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | `{"temperature": 0.7, "max_tokens": 4096}` |
| `usage_details` | dict | ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ | `{"input": 50, "output": 25, "total": 75}` |
| `metadata` | dict | ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ | `{"session_id": "session-123", ...}` |

### usage_details ã®æ§‹é€ 

```python
{
    "input": 150,              # å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
    "output": 75,              # å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
    "total": 225,              # åˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³æ•°
    # ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾å¿œãƒ¢ãƒ‡ãƒ«ï¼‰
    "cache_read_input_tokens": 50,
    "cache_creation_input_tokens": 100,
}
```

### metadata ã®æ§‹é€ ï¼ˆæœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰

```python
{
    # ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½è·¡
    "session_id": "session-123",
    "user_id": "user-456",

    # ç’°å¢ƒæƒ…å ±
    "aws_region": "us-east-1",
    "version": "1.0.0",

    # å®Ÿè¡Œæƒ…å ±
    "streaming": "true",
    "sdk": "claude-agent-sdk",
    "cwd": "/path/to/working/directory",

    # ãƒ„ãƒ¼ãƒ«æƒ…å ±ï¼ˆBedrockAgentSDKWithClient ã®ã¿ï¼‰
    "tools": "['Write', 'Read']",
    "tools_count": "2",

    # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
    "message_count": "1",
    "response_length": "1250",
}
```

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. åˆæœŸåŒ–ãƒ•ã‚§ãƒ¼ã‚º

```python
from langfuse import get_client

langfuse = get_client()
# .env ã‹ã‚‰ LANGFUSE_SECRET_KEY, LANGFUSE_PUBLIC_KEY ã‚’èª­ã¿è¾¼ã¿
```

### 2. ãƒˆãƒ¬ãƒ¼ã‚¹é–‹å§‹

```python
generation = langfuse.start_generation(
    name="chat_streaming",
    model=self.model,
    input=prompt,
    model_parameters={...},
    metadata={...},
)
# â†’ Langfuse Cloud ã«é€ä¿¡
```

### 3. LLM å®Ÿè¡Œ

```python
async for message in query(prompt=prompt):
    # Bedrock ã‹ã‚‰ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
    full_response += message_text
    yield message_text
```

### 4. ãƒˆãƒ¼ã‚¯ãƒ³æ¨å®š

```python
input_tokens = estimate_tokens(prompt)
output_tokens = estimate_tokens(full_response)
```

**ãƒˆãƒ¼ã‚¯ãƒ³æ¨å®šã®ä»•çµ„ã¿:**
- `tiktoken` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ï¼ˆGPT-4 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰
- Claude ãƒ¢ãƒ‡ãƒ«ã¨ã®äº’æ›æ€§ã‚’è€ƒæ…®ã—ãŸæ¨å®š
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: 4æ–‡å­— â‰ˆ 1ãƒˆãƒ¼ã‚¯ãƒ³

### 5. å®Œäº†å‡¦ç†

```python
generation.update(
    output=full_response,
    usage_details={
        "input": input_tokens,
        "output": output_tokens,
        "total": input_tokens + output_tokens,
    },
)
generation.end()
langfuse.flush()
# â†’ Langfuse Cloud ã«æœ€çµ‚ãƒ‡ãƒ¼ã‚¿é€ä¿¡
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰

- **ãƒãƒƒãƒãƒ³ã‚°**: Langfuse SDK ã¯è‡ªå‹•çš„ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒãƒƒãƒå‡¦ç†
- **éåŒæœŸé€ä¿¡**: ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã¯éåŒæœŸã§é€ä¿¡
- **ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°**: `flush()` ã¾ã§ãƒãƒƒãƒ•ã‚¡ã«è“„ç©

### ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·

- **ãƒˆãƒ¬ãƒ¼ã‚¹é–‹å§‹**: < 1msï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒ•ã‚¡ã«è¨˜éŒ²ï¼‰
- **ãƒˆãƒ¬ãƒ¼ã‚¹çµ‚äº†**: < 5msï¼ˆãƒãƒƒãƒ•ã‚¡ã‚’ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ï¼‰
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€ä¿¡**: éåŒæœŸï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼‰

### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

- **1ãƒˆãƒ¬ãƒ¼ã‚¹ã‚ãŸã‚Š**: ç´„ 1-5 KB
- **ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 100 ãƒˆãƒ¬ãƒ¼ã‚¹
- **è‡ªå‹•ãƒ•ãƒ©ãƒƒã‚·ãƒ¥**: ãƒãƒƒãƒ•ã‚¡ãŒæº€æ¯ã«ãªã‚‹ã¨è‡ªå‹•é€ä¿¡

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

### é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿

âœ… **é€ä¿¡ã•ã‚Œã‚‹:**
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ã‚­ã‚¹ãƒˆ
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ†ã‚­ã‚¹ãƒˆ
- ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡
- ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

âŒ **é€ä¿¡ã•ã‚Œãªã„:**
- AWS èªè¨¼æƒ…å ±
- API ã‚­ãƒ¼ï¼ˆLangfuse è‡ªä½“ã®èªè¨¼ã‚’é™¤ãï¼‰
- ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰

### ãƒ‡ãƒ¼ã‚¿ã®ä¿ç®¡

- **ä¿ç®¡å ´æ‰€**: Langfuse Cloudï¼ˆUS/EU ãƒªãƒ¼ã‚¸ãƒ§ãƒ³é¸æŠå¯èƒ½ï¼‰
- **æš—å·åŒ–**: TLS 1.2+ ã§é€ä¿¡ã€ä¿å­˜æ™‚ã‚‚æš—å·åŒ–
- **ä¿æŒæœŸé–“**: ãƒ—ãƒ©ãƒ³ã«å¿œã˜ã¦è¨­å®šå¯èƒ½

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è€ƒæ…®äº‹é …

âš ï¸ **æ³¨æ„**: Langfuse ã«é€ä¿¡ã•ã‚Œã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã¯ã€æ©Ÿå¯†æƒ…å ±ã‚’å«ã‚ãªã„ã§ãã ã•ã„ã€‚

**æ¨å¥¨äº‹é …:**
- PIIï¼ˆå€‹äººè­˜åˆ¥æƒ…å ±ï¼‰ã®ãƒã‚¹ã‚­ãƒ³ã‚°
- session_id / user_id ã«ã¯åŒ¿å ID ã‚’ä½¿ç”¨
- æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã«å«ã‚ãªã„

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [å®Ÿè£…ã‚¬ã‚¤ãƒ‰](./implementation-guide.md) - å®Ÿéš›ã®å®Ÿè£…æ–¹æ³•ã‚’å­¦ã¶
- [ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](./best-practices.md) - é‹ç”¨ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’ç¢ºèª

## å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Langfuse å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://langfuse.com/docs)
- [OpenTelemetry ã«ã¤ã„ã¦](https://opentelemetry.io/)
- [Langfuse Python SDK](https://langfuse.com/docs/observability/sdk/python/overview)
